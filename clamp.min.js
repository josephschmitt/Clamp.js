/*!
* Clamp.js 0.5.1
*
* Copyright 2011-2013, Joseph Schmitt http://joe.sh
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
!function(){function t(t,e){function n(t,e){return s.getComputedStyle||(s.getComputedStyle=function(t){return this.el=t,this.getPropertyValue=function(e){var n=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),n.test(e)&&(e=e.replace(n,function(){return arguments[2].toUpperCase()})),t.currentStyle&&t.currentStyle[e]?t.currentStyle[e]:null},this}),s.getComputedStyle(t,null).getPropertyValue(e)}function i(e){var n=e||t.clientHeight,i=l(t);return Math.max(Math.floor(n/i),0)}function a(e){var n=l(t);return n*e}function l(t){var e=n(t,"line-height");return"normal"==e&&(e=1.2*parseInt(n(t,"font-size"))),Math.round(parseFloat(e))}function r(e){return e.lastChild.children&&e.lastChild.children.length>0?r(Array.prototype.slice.call(e.children).pop()):e.lastChild&&e.lastChild.nodeValue&&""!=e.lastChild.nodeValue&&e.lastChild.nodeValue!=h.truncationChar?e.lastChild:(e.lastChild.parentNode.removeChild(e.lastChild),r(t))}function o(e,n){function i(){y=h.splitOnChars.slice(0),H=y[0],v=null,g=null}if(n){var a=e.nodeValue.replace(h.truncationChar,"");if(v||(H=y.length>0?y.shift():"",v=a.split(H)),v.length>1?(g=v.pop(),u(e,v.join(H))):v=null,c&&(e.nodeValue=e.nodeValue.replace(h.truncationChar,""),t.innerHTML=e.nodeValue+" "+c.innerHTML+h.truncationChar),v){if(t.clientHeight<=n){if(y.length<0||""==H)return t.innerHTML;u(e,v.join(H)+H+g),v=null}}else""==H&&(u(e,""),e=r(t),i());return h.animate?void setTimeout(function(){o(e,n)},h.animate===!0?10:h.animate):o(e,n)}}function u(t,e){t.nodeValue=e+h.truncationChar}e=e||{};var c,s=window,h={clamp:e.clamp||2,useNativeClamp:void 0!==e.useNativeClamp?e.useNativeClamp:!0,splitOnChars:e.splitOnChars||[".","-","–","—"," "],animate:e.animate||!1,truncationChar:e.truncationChar||"…",truncationHTML:e.truncationHTML},p=t.style,d=t.innerHTML,C=void 0!==t.style.webkitLineClamp,f=h.clamp,m=f.indexOf&&(f.indexOf("px")>-1||f.indexOf("em")>-1);h.truncationHTML&&(c=document.createElement("span"),c.innerHTML=h.truncationHTML);var v,g,y=h.splitOnChars.slice(0),H=y[0];"auto"==f?f=i():m&&(f=i(parseInt(f)));var M;if(C&&h.useNativeClamp)p.overflow="hidden",p.textOverflow="ellipsis",p.webkitBoxOrient="vertical",p.display="-webkit-box",p.webkitLineClamp=f,m&&(p.height=h.clamp+"px");else{var L=a(f);L>t.clientHeight||(M=o(r(t),L))}return{original:d,clamped:M}}window.$clamp=t}();